## UniFi Proxy 1.1.0
    18/01/2016
    
Основная функция getMetric() полностью переписана. Теперь вместо рекурсивного вызова при обходе JSON дерева используется стековая модель.

Введена обработка всех найденных на контроллере сайтов в том случае, если в запросе имя сайта не указано.

Добавлены новые действия:
- psum - вычисление процента суммы значений подпадающих под фильтр JSON-ключей от общей суммы.
- pcount - вычисление процента количества значений подпадающих под фильтр JSON-ключей от общего количества.

Добавлены новые объекты:
- alluser - все пользователи в базе данных (объект user определяет только активных пользователей);
- health - состояние контроллера UniFi (см. дашбоард в v4);
- setting - некоторые настройки контроллера (Settings -> Site);
- network - определенные на контроллере сети (Settings -> Networks);
- usergroup - пользовательские группы (Settings -> User Groups);
- sysinfo - некоторая системная информация;
- number - информация о сопоставленных voip-устройствам абонентских номерах;
- extension - информация о зарегистрированных на контроллере voip-устройствах.

Введена возможность получения LLD-JSON с произвольного поддерева JSON. Обрабатываемые на текущий момент объекты:
- uap_vap_table - список виртуальных точек доступа в пределах заданной UAP;
- usw_port_table - таблица портов UniFi Switch;

### Пояснения, примеры

# LLD-JSON для всех UAP для сайта "default"
./unifi_proxy_get 127.0.0.1 8448 "discovery,uap,default"

# LLD-JSON для всех UAP во всех сайтах контроллера
./unifi_proxy_get 127.0.0.1 8448 "discovery,uap"

# Процент активных пользователей во всех сайтах контроллера
./unifi_proxy_get 127.0.0.1 8448 "sum,site,,num_sta"

# Количество активных UAP во всех сайтах контроллера
./unifi_proxy_get 127.0.0.1 8448 "count,uap,,[state=1].state"

# Процент активных UAP от их общего числа во всех сайтах контроллера
./unifi_proxy_get 127.0.0.1 8448 "pcount,uap,,[state=1].state"

# Процент траффика, генерируемого гостевыми виртуальными точками доступа
./unifi_proxy_get 127.0.0.1 8448 "psum,uap,,vap_table.[is_guest=1].rx_bytes"









Core function getMetric() was reworked and built now on stack mechanism instead recursive self call on JSON tree traversal.
New actions:
- psum
- pcount
